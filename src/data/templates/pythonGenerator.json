[
	"#   Copyright (c) 2020 Debashish Patra, MPL-2.0",
	"#",
	"#   This is a generated file. Please do not edit.",
	"",
	"import unreal",
	"import json",
	"import re",
	"import ntpath",
	"import os",
	"",
	"# Gives the filename from fullpath",
	"",
	"",
	"def path_leaf(path):",
	"\thead, tail = ntpath.split(path)",
	"\treturn tail or ntpath.basename(head)",
	"",
	"",
	"def StartUp(meshlist):",
	"\t\"\"\"main script",
	"\t",
	"\tParameters :",
	"\t\tmeshlist (list): saves list of meshes",
	"\tReturns :",
	"\t\tmeshlist (list): Filled list of meshes",
	"\"\"\"",
	"\twith open(r'$1/AssetData.json') as filename:",
	"\t\tclean_json = json.load(filename)",
	"\t\tletter = []",
	"\t\tfor entry in clean_json[\"StaticMesh\"][\"list\"]:",
	"\t\t\tmytask = buildImportTask(entry[\"name\"], entry[\"path\"], entry[\"targetpath\"])",
	"\t\t\tletter.append(modifyTask_FBX(mytask))",
	"\t\t\tmeshlist.append(entry[\"targetpath\"] + \"/\" + entry[\"name\"])",
	"\t\tfor entry in clean_json[\"Texture\"][\"list\"]:",
	"\t\t\tmytask = buildImportTask(entry[\"name\"], entry[\"path\"], entry[\"targetpath\"])",
	"\t\t\tletter.append(mytask)",
	"\t\tfor entry in clean_json[\"Audio\"][\"list\"]:",
	"\t\t\tmytask = buildImportTask(entry[\"name\"], entry[\"path\"], entry[\"targetpath\"])",
	"\t\t\tletter.append(mytask)",
	"\t\texecuteImportTasks(letter)",
	"\treturn meshlist",
	"",
	"# Initial settings for import",
	"def buildImportTask(filename, filepath, destination_path):",
	"\ttask = unreal.AssetImportTask()",
	"\ttask.set_editor_property(\"automated\", True)",
	"\ttask.set_editor_property(\"filename\", filepath)",

	"\tfilename = path_leaf(filepath)  # Get just filename from fullpath",
	"\tfilename = os.path.splitext(filename)[0]",
	"\ttask.set_editor_property(\"destination_name\", filename)",
	"\ttask.set_editor_property(\"destination_path\", destination_path)",

	"\ttask.set_editor_property(\"replace_existing\", True)",
	"\ttask.set_editor_property(\"save\", True)",
	"\treturn task",
	"",
	"# Adds options for FBX import UI",
	"def modifyTask_FBX(task):",
	"\ttaskops = unreal.FbxImportUI()",
	"\ttaskops.set_editor_property(\"import_materials\", False)",
	"\ttaskops.set_editor_property(\"import_textures\", False)",
	"\ttaskops.set_editor_property(\"auto_compute_lod_distances\", True)",
	"\ttask.set_editor_property(\"options\", taskops)",
	"\treturn task",
	"",
	"def executeImportTasks(tasks):",
	"\tunreal.AssetToolsHelpers.get_asset_tools().import_asset_tasks(tasks)",
	"",
	"",
	"mymeshlist = []",
	"StartUp(mymeshlist)"
]
